h1. Panako - Acoustic Fingerprinting


Panako is an "acoustic fingerprinting":https://en.wikipedia.org/wiki/Acoustic_fingerprint system. The system is able to extract fingerprints from an audio stream, and either store those fingerprints in a database, or find a match between the extracted fingerprints and stored fingerprints.  Several acoustic fingerprinting algorithms are implemented within Panako. The main algorithm, the Panako algorithm, has the feature that audio queries can be identified reliably and quickly even if they has been sped up, time stretched or pitch shifted with respect to the reference audio. The main focus of Panako is to serve as a demonstration of the Panako algorithm. Other acoustic fingerprinting schemes are implemented to serve as a baseline for comparison. More information can be found in the "article about Panako":http://www.terasoft.com.tw/conf/ismir2014/proceedings/T048_122_Paper.pdf.

Please be aware of the patents "US7627477 B2":https://www.google.com/patents/US7627477 and "US6990453":https://www.google.com/patents/US6990453 and "perhaps others":http://www.shazam.com/music/web/productfeatures.html?id=1284. They describe techniques used in some algorithms implemented within Panako. The patents limit the use of some algorithms  under various conditions and for several regions. Please make sure to consult your intellectual property rights specialist if you are in doubt about these restrictions. If these restrictions apply, respect the patent holders rights. The first aim of Panako is to serve as a research platform to experiment with and improve fingerprinting algorithms.

This document covers installation, usage and configuration of Panako.

The Panako source code is licensed under the "GNU Affero General Public License":https://www.gnu.org/licenses/agpl-3.0.html.

h2. Overview

# "Why Panako?":#why
# "Getting Started":#getting_started
# "Usage":#usage
## "Store Fingerprints":#store
## "Query for Matches":#query
## "Print Storage Statistics":#stats
## "Print Configuration":#configuration
## "Synchronize Media Files":#sync
## "Synchronize Sensor Streams with SyncSink":#syncsink
## "Compare Media Files":#compare
# "Further reading":#read
# "Credits":#credits
# "Reproduce the ISMIR Paper Results":#ismir

h2(#why). Why Panako?

Content based music search algorithms make it possible to identify a small audio fragment in a digital music archive with potentially millions of songs. Current search algorithms are able to respond quickly and reliably on an audio query, even if there is noise or other distortions present. During the last decade they have been used successfully as digital music archive management tools, music identification services for smartphones or for digital rights management. 

<div align="center"><img src="data:image/png;base64,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"/>
<small>Fig 1. General content based audio search scheme.</small></div>


Most algorithms, as they are described in the literature, do not allow substantial changes in replay speed. The speed of the audio query needs to be the same as the reference audio for the current algorithms to work. This poses a problem, since changes in replay speed do occur commonly, they are either introduced by accident during an analog to digital conversion or are introduced deliberately. 

Analogue physical media such as wax cylinders, wire recordings, magnetic tapes and grammophone records can be digitized at an incorrect or varying playback speed. Even when calibrated mechanical devices are used in a digitization process, the media could already have been recorded at an undesirable speed. To identify duplicates in a digitized archive, a music search algorithm should compensate for changes in replay speed

Next to accidental speed changes, deliberate speed manipulations are sometimes introduced during radio broadcasts: occasionally songs are played a bit faster to fit into a timeslot. During a DJ-set speed changes are almost always present. To correctly identify audio in these cases as well, a music search algorithm robust against pitch shifting, time stretching and speed changes is desired.

The Panako algorithm allows such changes while maintaining other desired features as scalability, robustness and reliability. Next to two versions of the Panako algorithm (internally identified as CTEQ and NCTEQ), two versions of the algorithm described in "An Industrial-Strength Audio Search Algorithm":http://www.ee.columbia.edu/~dpwe/papers/Wang03-shazam.pdf are implemented (internally identified as FFT and NFFT). Also the algorithm in "A Robust Audio Fingerprinter Based on Pitch Class Histograms - Applications for Ethnic Music Archives":http://0110.be/files/attachments/415/2012.01.20.fingerprinter.submitted.pdf is available. To make comparisons between fingerprinting systems easy, researchers are kindly invited to contribute algorithms to the Panako project. 

Alternative open source music identification systems are "audfprint":http://www.ee.columbia.edu/~dpwe/resources/matlab/audfprint/ and "echoprint":http://echoprint.me/. Alternative systems with similar features are described in "US7627477 B2":https://www.google.com/patents/US7627477 and in  "__Quad-based Audio Fingerprinting Robust To Time And Frequency Scaling__ (2014)":http://www.dafx14.fau.de/papers/dafx14_reinhard_sonnleitner_quad_based_audio_fingerpr.pdf by Reinhard Sonnleitner and Gerhard Widmer.


h2(#getting_started). Getting started

To download the latest Panako version, @wget@ needs to be installed on your system. Once downloaded the contents looks like this:  

* @src@ contains the Java source files.
* @lib@ contains the dependencies (JAR-files).
* @build@ contains an ant build file to compile Panako and the documentation. Use @ant release@ to build the source and compile Panako.
* @doc@ contains "documentation for the source files":doc/, generated with @javadoc@.

To compile Panako, the JDK 7 or later is required. See the "installation instructions":http://java.com/en/download/help/index_installing.xml on the Java website, for installation on your operating system. See for example how to "install Java 7 on Debian 7":http://d.stavrovski.net/blog/post/installing-oracle-java-7-on-debian-wheezy.

Panako uses the "Apache Ant":https://ant.apache.org/ build system. Install it on your system. Once ant and the other components are installed correctly the following commands should get you started:


bc. wget http://panako.be/releases/Panako-latest/Panako-latest-src.zip
unzip Panako-latest-src.zip
#sudo apt-get install default-jdk ant libav-tools# Optionally install JDK, ant libav-tools (on Ubuntu).
cd Panako/build
ant #Builds the core Panako library
ant install #Installs Panako in the /opt/panako directory
ant doc #Creates the documentation in Panako/doc
cp ../doc/panako /usr/bin #copies the panako startup script to your path

The last command copies the startup script in @doc/panako@ to a directory in your path. The script allows for easy access to Panako's functionality. If this does not work for you, you can still call Panako using @java -jar /opt/panako/panako.jar [..args]@.

Panako decodes audio using by calling an utility that should be present on your system. Internally it reads the output of a sub-process via a pipe, in this case, the output are decoded PCM audio samples. By default Panako calls @avconv@, included in libav. @avconv@ should be installed correctly and should be available on your systems path. Alternatively, Panako can be configured to use any utility (like @ffmpeg@) that can pipe decoded audio streams in the format PCM, one channel, 16bit per sample. Libav version 9 or later is advised. On a Debian like system:

bc. apt-get install libav-tools


**Test Panako**. You might need a new shell to use @panako@.
	
bc. panako -v #prints version
panako stats #db info

h2(#usage). Panako Usage

Panako provides a command line interface, it can be called using **@panako subapplication [argument...]@**. For each task Panako has to perform, there is a subapplication. There are subapplications to store fingerprints, query audio fragments, monitor audio streams, and so on. Each subapplication has its own list of arguments, options, and output format that define the behavior of the subapplication.

To save some keystrokes the name of the subapplication can be shortened using a unique prefix. For example @panako m file.mp3@ is expanded to @panako monitor file.mp3@. Since both @stats@ and @store@ are valid subapplications the @store@ call can be shortened to @panako sto *.mp3@, @panako s *.mp3@ gives an invalid application message. A "trie":https://en.wikipedia.org/wiki/Trie is used to find a unique prefix. 

What follows is a list of those subapplications, their arguments, and respective goal.

h3(#store). Store Fingerprints - **@panako store@**

The @store@ instruction extracts fingerprints from audio tracks and stores those in the datastorage. The command expects a list of audio files, video files or a text file with a list of file names.


bc.. #Audio is converted automatically
panako store audio.mp3 audio.ogg audio.flac audio.wav 

#The first audio stream of video containers formats is used.
panako store audio.mpc audio.mp4 audio.acc audio.avi audio.ogv audio.wma 

#Glob characters can be practical
panako store */*.mp3

#A text file with audio files can be used as well
#The following searches for all mp3's (recursively) and
#stores them in a text file
find . -name '*.mp3' > list.txt
#Iterate the list
panako store list.txt

h3(#query). Query for Matches - **@panako query@**

The @query@ command extracts fingerprints from a short audio frament and tries to match the fingerprints with the database. 
	
bc. panako query short_audio.mp3


h3(#stats). Print Storage Statistics - **@panako stats@**

The @stats@ command prints statistics about the stored fingerprints and the number of audio fragments. If an integer argument is given it keeps printing the stats every x seconds.

bc. panako stats # print stats once
panako stats 20 # print stats every 20s 


h3(#configuration). Print Configuration - **@panako config@**

The @config@ subapplication prints the configuration currently in use.

bc. panako config

To override configuration values there are two options. The first option is to create a configuration file, by default at the following location: @/opt/config.properties@. The configuration file is a properties text file. An commented configuration file should be included in the doc directory at @doc/config.properties@.

The second option to override configuration values is by adding them to the arguments of the command line call as follows: 

bc. panako subapplication CONFIG_KEY=value

For example, if you do not want to check for duplicate files while building a fingerprint database the following can be done:

bc. panako store file.mp3 CHECK_FOR_DUPLICATES=FALSE

The configuration values provided as a command line argument have priority over the ones in the configuration file. If there is no value configured a default is used automatically. To find out which configuration options are available and their respective functions, consult the documented example configuration file @doc/config.properties@.. 


h3(#browser). Browse Fingerprints - **@panako browser@**

Shows a swing user interface with a spectrogram and dectected event points and fingerprints. It can be used
to check the effect of configuration parameters on fingerprint detection and to optimize configuration.

h3(#sync). Synchronize media files - **@panako sync@**

This operation extracts fingerprints from a reference media file and returns how much time offset there is to other files with similar audio. This is practical to synchronize video streams with similar audio or recordings of the same performance from several microphones.

The synchonize option uses a two stage algorithm. First fingerprints are extracted from the media files. With these it is checked if the media files contain similar audio. If they do, a rough offset is determined (e.g. with 32ms accuracy). Subsequently crosscovariance of one audio frame is used to improve the offset estimation. This offset is returned.

bc. panako sync reference.avi other.mkv other.mp3

h3(#syncsink). Synchronize Sensor Streams with SyncSink - **@panako syncsink@**

This command starts a Swing user interface to synchronize several audio/video and data files. The aim is to make it easy to synchronize various media files and to allow synchronization of sensor data streams. Syncronization of sensor streams can be done effectively if for each sensor stream there is a corresponding synchronized ambient audio recording. The problem of synchronizing sensor streams is then reduced to audio-to-audio alignment. The SyncSink facilitates this type of data-stream synchronization.

The synchonize option uses a two stage algorithm. First fingerprints are extracted from the media files. With these it is checked if the media files contain similar audio. If they do, a rough offset is determined (e.g. with 32ms accuracy). Subsequently crosscovariance of one audio frame is used to improve the offset estimation. This offset is returned.

<div align="center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkUAAAF1CAYAAADm7J7xAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AACAASURBVHic7d15fBTl4cfx785uEkgIR8IVDg8CRkRuEBU19USloHIIWgWttt6gWI9KvSra1gO0XgVtqxyeaC2KrSeNFRFv1P6UoqIFQW4IJCGb7M7vj7DrZtljZq/ZhM/79dqXsjP7PM/M7O5893membgUZubMe8zw5wAAAJqbadOudoX+O/iP++671xwwYIAGDRqsVq1aZb5lAAAg6NvV3+hvL7ygo4YPz2i9by9dqvPPO0+rVq3KaL2Zrtvr9WrdunX6ft06XXXVNJckeaSGQDR58nkqKMiXz+fT7t01aW8MAACIzeVyye/3Z7ROwzBkmmbG68103R6PR/vtt586deqkWbNmmlddNc3lkaQBAwaqID9f9XV1aW8EAACwJhASnKgz0/U6VXdubq5KSkokSZ6ZM+8xBw4cqHpfvZhMBABA9jAMI+M9Nm6327GeIqfq7tSxo2bOvMf0SFJhYaFqaqoz2gAAABCbYRjyO9RTlOl6nazbk5PT8F9JMv1+yYGNBwAA0RmG0XCOzqBAb02m63W6bikQikyToTMAALKM4XLJ73eopyjD9TpdtxQSigAAQHZxGYZM06GeogzX63TdUmgoIhgBAJBVnJhobRiGJDl2Sb5TdUsMnwEAkLWcmGgdvALMgc4SJ+uWGD4DACBrOTHROnivIAdv3mi1brfbLUny+Xy2lkXD8BkAAFnKcLky31Nk87L4ESNOjrvOK6/8M+V1u91uHXHkcBmGoU8/XaGtW7cGlxUVFalfv/7y+/1auvRty8GI4TMgTT755BM99tjjWrFihTZs2KCCggJ1795dp512miZPnpR1benZs5d69OihV199xXK5ibwGgHWO9BSl4bJ4q2XZqbvO55NpmjIMQwMGDNTHH32krVu3qKioWAMGDJTU0EtU5/XK5XLFKa0Bw2dAGvzzn69oypQpMk1TXbt21YABA1RfX6+qqiqVlHRWTk6u6uq8WdWWwsJCFRYWKj+/QNXVVZbLNwzD9msAWOMyjIxfnu5O8LL4WbNm7vXcVVdNkyTLZdmp2+fzafHixRo9erQMw9DAQYP01apV6tmr1546/Vq8eLFa5OUFh9LiYfgMSIPHH3tMfr9fb7zxhvr06SPT7w92B7tcLnm9tRn7zFlty8cffaiCVoWJ38yV7xAgpVwu1545Ng71FNms96A9YSQSq2XZqdswXKqt3a1FixZp9OjRcrvd6n3IIaqvr5fP59OiRYtUW7tb+S1bWK+/obENw2c8ePBIzaNb926SpN///vf617/+pR2VO1RdXaXq6ipVVe1SXV2d7rzrbvXsdZAenzsv+LodlZXqfUgfjT9zgkxJPXsdpPPO/7nOnTRJgwYP0aDBQ3TxJZdqy9atjep7c8kSnXX2zzRo8BAdNuxwTZo8WV98udJyWwJ1DR9+pKqqqyzXHcpbV6fLLr9CB5UdrKeefsbxY8CDR1N/SD9ekp/JhzvksngrjwC7y1JRd5vWrbW7plrLli2Tx+ORJHk8Hi1btky7a6rVpnVrW9sRDEUAUmf69Ok644wztGTJEk2cOFHDhx+lWbPu1ZYtW4LrnHvuOfJ4PHrhhReUm5srSXrttddUV1enyZMnKz+/QJL09ttv63//W6PDDjtMhYWFev3113X//Q8Ex8hfffVV/fKXF2nHjh269tprdcMNN6hPn0NVVnaQDMNtqS0BhuFWQUGr4L/j1R1QW1uryy+/Qm+++aZmz/6TLrzwQuXk5KZ8vwL7EpfLFZxoncmHEXJZvJVHgN1lqajbb5rqUVqqI488UvX19ZKk+vp6HXnkkepRWmqrHCk4fObMTZKA5qpN69a6684/aPr06fr73/+ul19+WQ899JD+8pe/6NFH5mjYsGHq3KmTTjnlZL344kv6739X6YD999NLLy1WQUGBRo8erTpvw5yj0tJSLV26VH6/X2vWrNGwYcO0YsUK5eXmaffuGj366J/ldrv1wgsvqG3bNvJ6vZIpGW5D3tpaS23Zy54viHh1S9Lu3bt1/vnn6/3339eCBfN1zDHlqqmuVn19Xcb2N9BcOfK3zxK8JD/W+pYvsbdZd/v2HTR06GFyuVzy+Xx6++23dcQRR8gwDA0depjeW75cmzdvslSWFDqnyOLMbADWmKap1q0LNWnSJF1wwQV66623NGnSJM2e84iOHD5c9fX1Ou+88/Tiiy/pmWee0S9+caGWLVums88+Wy1bttSuXTslNfxa9Pv92rVrp9q2bSNJqqmpafhFJWnlypXq0KGDioqKtHNn5Y89v3X22tKo7Xv+G69uSdq2bZuWLl2qsrIyDRo0WNXVVXuVB8C+wJwiq5OUx4wdG3XZ8889Z7neYG+NzYnWp58xJuoyq2XZqdvtdmvIkCHB76lFixZp65Yt2rRpU3Dy9ZAhQ/TKK6/YvySfSASkztKl76h160L16dNHhmGqptqrrVs2S5JycnKUm5un+ro69T30UA0ePFjPPfecupSUyOfzadKkSaqr8+79Synsc+pyuSTTVLdu3bRq1Sqt+d//1KZN64TbEl6XlbolqaSkRFdffbUuueQSXXDBBXr4oQeDY/sAktEQigwj+TO0nc9koLcmlZ9jq2XZqdvlcqne55PfNLV48WLV1FSrpKRE23ds16JFizRy5Ej5/X4ZhmH/knyrLwAQ36N/flRLl76jwsJCdezYUWvXrlVtba08Ho+mTp2qH/tipPMmT9YVU6bonpkzdeihh6pv376q2tNLZMWZ48drxu23a9z48TrnZ2erVatCffvdt7py6lS53W5bbUnUaaedpu+/X6sZM27XDdN/o9//7o7g3zACkBiXq+GSfLdh7XLySJfEB5QdVGa5XsNmKIpVr9367dTt8/n0+GOPyZSpdm3bqX1xe0lS++L22rZtm/7ylz/LJZf2228/y9vCzRuBNJg8ebJat26jFStWaM2aNeratav69++vK6+8UgcffLCqqnYFP3PHn3C8unXrprVr1+rcc8+Vz+dTfYSu3kifUVPSOeeeo1aFhZo/f75mzrpXhYWF6tWrp7Zs3aoOHTrYaku0uqLVHercc8/Vxo0bNWfOI2rbtq2uv/46fmwBSQhMtLZ6Qu9zSJ+U1Bv4+2OZrtdu3R6PRwceeGDw/0N16NBB7dq1i7gsFtfMmfeYkydNsnxjIwDWePYMTbnd7uBltb76etXW7m40vm2aps4YM1bffvutPv30U3nc7oZ7B+3Rpm07+f0+7aysjPlcbm6ecvPyGnpoTFM+v1811VXy+/2W2xJerpW6w//domVL5eW1kLe2VjU11Sneq8C+Y9euXfr000+Vl5eX0Xrz8vLUuXNnfffddxmt1+m6V3z6KXe0BtKlvq5u77k6EXz00Uf64osvNGHCBLVq1Uo7K3c0Wr5j+7a9XhPpOa+3tlGYSqQt4eVaqTv837trarS7piZuXQBiC0y0zvQcPbs9Rc2lbonhM8Bx8+YvkNQw/FRXV5fxP/4IIHs5EYrszilqLnVL/JkPwFFVVVXauHGDRowYocGDBzdMsOazCEANPUUej0dutzuj8/PoKeJLGHBEQUGBnliwQAWtClVfX8f9fQAEtWzZUoWtW8v0+zM679flcjkWTJysW2L4DHCcaZraubMy/ooA9jnFRUX6/vvvVVhYmNHeIieDSVaEIrrsAQDILkVFRaqpqdHmzZuVn5+vnJyctIejwLweJzhZt7QnFGX6cj8AABCf3+9X9+7d1aZNG61evVo7d1q/sSvsa+gpcroVAAAgorr6ehW0aqVBgwY53ZRm7ZMVKxpCEUNnAABkL7/Pp90W/6gpEscfJwIAANCe4bOiPX9Ezarly5dr2LBhaWkQAABAMhLNKfQUAQAAiFAEAAAgiVAEAAAgiVAEAAAgiVAEAAAgac/VZ3bl+dZJ1atT3RYAAADHJBSKBmwdI72Z6qYAAAAkr+FifPs3pk78z9Ae903CLwUAAEibN3sk9DLmFAEAAIhQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBGAPV0Fid4B1uq5MthtA80YoAiBJMqua5p/uaartBpB9CEUAAABK5g/CAkir8GEhs+qbiM+Frh/eaxL+XKShpsDyeOta7ZGJNpwV6/XR6go8H2u7wv8/Xr1W1olWd7znktkOAM4jFAFZzG7oicXuuuH12xGpnbHqj7ZdkYKGnbrD640VaiKVY7XuQHl2toNABGQfhs+AfYidgJHKE3Yqy7ITJiKtZ7ctVnrsEi0LQHahpwjYRwRO5qEn5mzqqYjXY+NEW0MDULSeunCp6HkC4AxCEbAPiTW05CQrc59iPe+kWEOcsbYjG/Y7gMYYPgP2UfFOyqm+l1C0+qzWk+w8J7v1xXpNtDlC6aofQGbQUwQ0I7FOuFavugo8H22ozcrVZVauXAu/aitW21M19GSlrvAAF2v4LtJ6mdgOAOlBKAKyVPhJ2MpJ2U55idRnpZxU1mWl3Hj7IF5dVgJcMs8lsg4AZzB8BgAAIEIRgCYgXUNODGUBCMXwGYAmIRXDTnbmVQHY9xCKAKRUOkJGqsokAAGIheEzAAAAEYoAAAAkEYoAAAAkJTOn6E2u2gAAAM1HQqFoeYd3NWzYsFS3BQAAIGnLly9XIimF4TMAAAARigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACRJHqcbEMn29VudbgIAAFmrbUmR001olhwLRRUVFVGX7d5WrXdnLclgawAAaFp+8tuREZ8vLy/PcEuaD0d7iqIduO3rt+pdLdHUp67PcIsAAMh+9038fcRzaKwOB8THnCIAAAARigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRioCUadel2JHXphLtALAvIxQBAACIUAQAACDJ4T8ICzQ34cM+29ZtsbQsmXIilZVMO6y0M3SdVNRtdbgssF6kMqM9F6/OSO2PdWwANF+EIiCFwk/MoSdYOyffeOvGqifayT7aMjtlR1o/1uutLo9UbySRQk408fZ7pLIIRMC+jeEzIE0ydXKNVE+suu20y0qQsxNUUtGmQDtS1QYmdQMIoKcIyCA7J+B0nawzEQLSWUdoAIoU0iLVnYqeJwDNH6EIyJBIw06pWNeudPdgpbPtVsUb7ouEoTMADJ8BaRJ68s10D1G8wJVoOfHm4WRyCMtq29JVP4Dmh54iIIWiXekUOGFbCStW1o0l0uvjtcPO1Wnh4SN8ErXdtlvdN5HqiTefykrZDKEBCCAUASkSb+jFzuRnuxOlk329lWXpLD+RfZfMc4msA6D5Y/gMAABAhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJWXqforYlRY3+CwAAkG6OhqKKioqYy28tvzZDLQEAoGmJdw6FfY6FovLy8tjLK2IvBwAASCXmFAEAAIhQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIIlQBAAAIEnyON2AbFNRUZG2slvsWq9hL52VtvLRtFRM/Ffa6ygvL097HQDQXBCKIkjbiWTzauklSbd9k57y0TS0P1C6xJX2wJLOgA8AzRHDZwAAACIUAQAASCIUAQAASCIUAQAASCIUAQAASCIUAQAASCIUAQAASCIUAQAASCIUAQAASCIU7bNcHXo43QQAALIKoQhNDoEOAJAOhCIAAADxB2GzQnjPh7npG8vLE11mtx1Wl1lpeyq2N/DfVO2LWOVFey5amZFeF3g+3jEAADiHUJQFYp08o51gE1kW66RsZf1o9cSrI97yeNsbujwQRqyGmnjtD11mdVgutC2RtiNSWQQiAMh+DJ81AfFO5oksS8X60QJQsnN+Eg0PqQgdVnq2Ei0LAJDd6CnKEuk4gdotM1tO4k6FkNAAFKs3ykqdqQiHAIDMIhRlgUhDUKmQ7p6idHGyp8hOHVaPG0NnANA0MHzmMCsBKNY6iS5Lxfrpmjvj9HCVlSE0q3XRWwQATQc9RQ4LnHDjDcNEusLL7rLQ5VLjyclW1o/VPqvrx2OlHaF12tneSCJNxo4W7CKtFyv0MIQGAE0LoSgLWAkemViWiXqs1GslWKWq/VbLsVufnXUAANmB4TMAAAARigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACQRigAAACRx88aIKioq0lZ2uSTdyF2Okd73GQDAPkJRmPLy8jRXYKa3fDQZaX6nAQBsYvgMAABAhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJhCIAAABJksfpBkSzq6bO6SYAAJBWrVrmON0EhHA8FFVUVER8fp2vU4ZbAgBA5nVxb0jq9eXl5SlqCRwPRVLkA/rkm19q1BGlDrQGAIDMeHHZ10mFmmgdC0gMc4oAAABEKAIAAJBEKAIAAJBEKAIAAJBEKAIAAJBEKAIAAJBEKAIAAJBEKAIAAJBEKAIAAJBEKAIcU5if63QTMsrp7S3Mz3W8DQCyG6EIAABAhCIA+4DC/FztrPY63QwAWS4r/iAskO0Cwy6hJ1Yrz4UP14SfmBNdHut1kZbFqyeWRNoQabndOuxsY7Q22G0HgH0boQiwINJJOta6UvTQFPrv8GWhyyO9PtLrrJQbb32r2xT6+lj1xAqMVuqw0uZIy6NtF71EAKxg+AywwUqPRvhyq5rayTxe2zLddnqJACSLniLAotAAFK0nI1w6T8pOn/Cdrt+qbA6WALILoQhIofATcLpOyOGhzImAku1hIzTARno+29sPIPMYPgNssjOElsxkYzvPOSFeOzLdzkhzjsIfoc8DQDh6igAbAgHIyvyfwLp2rxSL9frACT2VNyK0cyVXrLaFvsZKG5O9TD6ZK+oAIBJCEWCTnQnR8YJFInXZLTdeexOdMJ3sROtYbbAaOu0iOAGIheEzAAAAEYoAAAAkEYoAAAAkEYoANEHMDQKQDoQiAAAAEYoAAAAkEYoAAAAkZcl9iioqKiI820kvLvs6420BACCTIp8D4QTHQ1F5ebnTTQAAwEEHO90A7MHwGQAAgAhFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkghFAAAAkiSP3Re4XC6VlJRo/fr1kiTTNFPeqFh1R5KONgTqilV2eHtS1Y54dadjP0QqM1J56dhmK3U7uc2R1k12uxPd36mqP7z8TG231bozdbwjlZmp93h42ek81qFlZ+pzbbX+VG53tLKs1p2Oz3W08lN9vJ38Dm9ObIUil8sl0zS1fPlyDRs2rNFzmZLuukK/qGO9wSNtd7L7wmrdgXVSLfwDG7496dhmq3WHr5MK0b4wrGxjstttte5o62ZCOo+3Fel+j0eSqfd4MuvYYfXHXbq22Ur9VpZbFSvcO/W5jlVuur/TMvkd3lxYHj6LFxCaC9M0LX1xJrIsFXWnS7wAks7jn+7wk4zm/L6P9WWY7u3Oxi/i5nqs7fR2W12WqvozIdJ2ZPJYZ8t7p7m+v1PN1pyibPoV67R9cV809222052dzuGFTLBSX7q2O5u/gJvTezwQPAM9r4FHuHQeZyv1Z4LVbUzXsc7Ueyh0/1rtbW+q7+94zjjjDMvrhu63JjfROhs+YNkg3fvByV/y0epO1zY7+V6yUne6ttvJL0Mrdadju538/rBSd6rbF/gshfZCZ3K7rdafzs+2kzL52Q7dv5na7vD2R9oeJ46By+XS3/72N8vrh05ZsT3R2kmRhnSysRs+3dK9H7IxEKVzm8O/rJ2YNxOt7nRst5MnCqt1p2O7nfz+sFJ3JrbZynzFVLJSf7qPi9Pnh2j1p3q7w1+bifd3vPlK4es0BU2upyhUU9vZ6ZLK/ZCNgSiSdE3CdXJOVyYn4mZ7L1EqXuNEmamse1/9fkvljzsn2a0/2R862Tw3M5MSPe6B/WUrFNmdsNacNcd9ES+UpHObs7nHrzkd69AeqfAu7vBtSvV226nbKc3pWFvVnLfZqe8zK/U7wYljHVp+tOG1WEOIiQwxWpl+Ea0sy8NnsbpdnexZcEK27YtUzT2IJZ3bnEj703XsI3XtZ+pYW9mmVM07CC/TzjBLotttte5I0nG894VjHWlIJXzILl3bbKX+SFL1fRarnnQf60R+5CW73ZH2dahsOW/Fez+EPhdor933UDg7r7E1pyiwU7Pp5o3pqD882Uaqx8rYeLrqTud+iLVN6dpmK3Wna5utlJuJYx2t3Ey95yNJ9/GOJR3bva8e69Byo835yNTnOlowjtSmVNQXSyaPtdX1kvnBEan3I1Pv73RK5bnNSlm2J1qbZuObN2ZSJk8GqVwv1XU7Ob+iOW2znXKb23ZbrSPd9VudhJrOurKl7ua2zVbLTXXddsprTvvc6WOdLqnoOYwUGqPthyZ19RkAANh3pOPikkBAilR2Qlef2bkpUqo5NY/IyYmH1L3v1L0vbjN17zv1Uve+U2+qpKP9sYJWk74kHwAANE+hE66tXoEWad5UpCvPos3pIxQBAICkWLm61Mq9lCKtE/6wInREy04ZhCIAALDPCu1ZIhQBAIBmI5HJ2YHXEIoAAMA+KzREGVL02d12Z33bLSdV9e6rdcda36m6Eymf91l2153KY8r7LLvrbkrfKU7Wzfssubqz+X1GTxEAAIAIRQAAAJIIRQAAAJIk18yZ95iTJ01yuh0AAACOeXzuXHqKAAAAJIbPAAAAJBGKAAAAJBGKAAAAJEkepxvQ1PnqffL5fJLs31Y800zTlMsw5HYbcrs59AAQzbptddq8q071PldWf7u7JOV4XCpq6VJJUZ4M+/dwRAjOjEmo99bp+x/W6bMVK7R92zanmxOXYRhq3bq1DulziLp32085eXlONwkAss6X63Zrx85dqnj3c63bViO/P3tjkWG41KVdSx099GBVetuqd0kLp5vUpBGKEuT3+fT992v14Qfvq/z4E7T//gcoJyfH6WbF5PV69b9vV2vJkjfl9/vVo0epDHqMACBo3Tavtu/cpedfWa6xx/XRsAG91aJF9gaN3TW79e5H/6fnX/9AY04apvUtDZW0zXW6WU0WZ8QE1dfX67PPPlP58SeoZ89eTjfHktzcXPU8qEympBUffaguXboqv6CV080CgKyxeVe93nr3c409ro/KDx/odHPiatGyhX4yfJB8pqn3PvpSrY4ZopK2Treq6WKidYJM09SOHdt1wAEHOt0U29q2ayefz79nLhQAIKDe59K6bTU6fOAhTjfFls6dilRZXSNfFg/1NQX0FCXI5XLJNE15PB6ZZtN6E7rkkt805ff7nW4KAGQVU5Lfbyo3Ny+r5xLtxTRkmi41sdNR1iEUJcEw6GgDgObG5ZIa4lFTShimJH+TanE2IhQlwe12y+/3y+VqntdA1tbWyltba3l9l8ulwtatm1zPGQCEcrtM1dbVK8fjdroplvGtmxqEoiT5fT4Z7qbzwZEawovPjD+fqM7r1SeffKx3ly2Nu67b7dbQww7XKSNHadfOylQ0EwAc462tk6cJjQa4XS75zOb5Az2TCEX7IE9Ojkxf/N8Vpmnq/ffe1a0zfqfc3Nj3NNq5c6ceuH+WThk5KlXNBABHmGp6g2ctW7ZgPlEKNJ0YDEf4fL64gUhSwz2a+EQCyCJL33lHww4/Ql26dNURRw7XZ59/buPVZhN8IFmEokQFrjyTKdOM/KiqqlLLli114oknRl0n9PH6669rxIgRCS+387DC7lyp+rp6Wf1grlmzRpdfcYVKe/ZS55IuKu3ZS9OmXa3vv//eVp3Ngdfr1f5N8NYO2a6iokJjxo5zuhkR9Tm0ryP1FrfvkLayrezvl156Sb0P6aPOJV00+rTTG7UpHZ+DnqWlevrpp7R27RpNOHO8plwxJe5rXC7JY2jPFbqNH5s3b9GN03+tI4cNUecO7dShXaH269JJDz5w/17rpuvRtlWLqMvIRckjFCXIdBlxw8XTTz+to446Sm+99VbWnex9/npL6+XlWrszam5urvw+a2Vu2LBBJ5x4kuq8WcabfQAAEkFJREFUdfrXkjf1w/p1evWVf2rnzp067vgTbO+rwYOH2Fo/W8rel+3r+/WHH35wpN4tmzc5Um/A1b+6Rnfcfrt+WL9OC599Ju1t6tSpkw7Yf38ZhqEpU6boiy+/jPsal8yoPwivvuoKff3VV3rg4Tlau36zNmyp1L+XvaeTThqR6qYnhEyUPEJRkmLdx+Lxxx/X1KlTNXLkSM2fPz/qel6vV9XV1QkvT4Tf4o0brX7I7NyeYNa992rI4MGaPftP6t69uySptLRUjzwyRwMG9Nd9f7zfclmS9O1339la38myvV6v1q9fv0/cIyrWtqbzmHm9XtXU1KSt/Ej1JXpMq6qqVFFRoe3bt2dNmxKpy+r+3rx5s844o6GHKNfiD65Uqa2tVZ7Fv/fo8bjlrfPtNTj18ksv6q/znlD/AQPlMgyZkrp13089evayPdBV6/Vq3bp18vn9tgfIoi3jxo3JIxQlqa7OK6+3dq/HV1+t0pdffqnjjz9OEydO1Lx58/ZaZ+3aNTr22J9owIABmjBhgs4//3z5/X7LyxN9+Cz26KTLG2+8qWnTroq47FdXX60lS5ZIaviyPaisrNHyt99+WxMmTpTU0F0f6Hovbt9Bxe076JlnGn59jvzpTzVt2tU6qKxMXbp0Vf8BA3XLLbeqvr4+6bIjufvue9S3X391Lumi3of00e//8IfgMq/Xq/Lyn2jUqNE68cSTNG78mTq4d++o8xseePDBYDsCNmzYoM4lXVRVVRXxNVVVVbrkkkvVt19/TZg4UcOPOlp9+/W3tK319fUaftTRKu3ZS6U9e2n/Aw7UswsXBtcdetgwTZk6Vd3321/9BwyMuX68bY21X3fu3KlLL7tc/QcM1KhRozVq1GitXr062I54yzdt2qRRo0br6GPK9fOfX6BLL7s82uGSJP3tby+ob7/+Ku3ZSweVlemgsjLdcsutlo6BlWO6detWXXnVVSrt2Utjxo5T33799Z///F9w+Smnnqpx48dr1r336eDeh+jll1+Ous8Dkn2fhQ6fDRw0KLjdB5WVqbh9B910081p29/RjnusIb14bYh1DMPNnj1bZ44fH7ONQaa0e/du1XlrGz2Ki4t12y03avu2rXstq/PW6r5Zd2v8mNGNnlu75jt1Lm6t7du2qnrXTh1zxFCNHHG8TigfrrGnj1RZ6X76+KMPgutv/GG9plx2kXrsV6IzRp2iQw8u1YqPPwoulxSxbpk+0VeUPK4+S0LD3awVcRhtwYInNH78eLlcLp166im6+OKL9cEHH2jw4MHBdW6++Wb169dfd97Z8MW2ZMkSzZw5K1hevOWJcjt8C4E1a9Zo4MDIf1No8ODB+n7t2uC/a2u9jZb7fD7V1TUEm/Lycm3ZvEnF7Tvs1QX/7rvLNeO223T33XdJkpa/956mTJkqSbrllpuTKjvcnXfepcWLF2vhs8+orKxMK1eu1C9/eZEk6frrrpMkffX111qx4hO1Ly6WJF173fV65JFH9Mf77turvIkTJ2rGjNu1adMmdejQcMJ46umnNWbMGBUUFERsw3XXXy+XYWjFJx/LMAz5/X516NjJ0n40DEP//MfLKiwslCS99vrrmjJlqsaPa5gf8s0332j+vLnBtvr9/pjrx9rWWPt11qx7tXbtWr3/3nLl5uZqzpxHdPEll+qVf/7D0vLbZsxQ3359dcftt0tqCGCxeh2vu/46/f2FF9S7d+/gc4HQHO8YeL3euMf0uuuul2EYWvnlF/J49v6qXTB/voqKiiRJj8+dq8fnztWpp54acZ9LqX+fffzRR8H/nz9/ge6ZeY+uu+5ay8fD7v62+nkKFa8NsY5hqJUrV+qRR/+sf79VYaletyH5zYZ5RaFuunWGrr36Ss1++EGd+tNROuLIozRy1CgVF7eXJI2fMFG/m/Fbbdi4QR06dJQkPfPUkzp9zFi1zM9Xnderr7/+Su9/8lnwNdOvv0aPzpmtmfc17Lvrr/uVDMPQZ1+savS+CW1LeLskKS8vVz4LVxUjNnqKkuAyDMn0y/Tv/Zg/f77OPvssmX6/3IahsWPH6Mknnmy0zqJFL+qaX10d8lxDJ6jV5ck8ZFo/9HV1dZbWq/V646+UQQMHDpRhGDIMQ0ccfrjmz5urJ558IuX1zJs/X3PmzFbZnt6YsrIyzZkzW/Pm/Thk6vF4gicqSRo6dIhqqiMPObQvLtbJJ4/Qs8/+2FvzzDPPasKZkX/l+v1+LVz4nKbf8OvgMKad4UzDMIIBR5JOPOEEbdmypdE6ZSE9TfHWt7OtoRa//LIuu+zS4LDKeedN1gcffBAcAoq7fPHLmjZtmuXtbtOmrR586CEtfeedYBmBk5CVYxBrO+vr6/X3RYv0m99MjxiIJAUDkST17NlTn3/+n0bLy8J691L9PgtYvXq1pv/mN5oze3aj0J3q/Z2IeG2IdQxD3XvvfZp+ww2N9nkshiTt+c4NfZx2+hj9Z+U3emj2o8rJydXtt92ioQP66m/PLZTpN1XUrlgnjThZzz/7bPA1C595WmPHTWj4954LdIraFQeXDxo8VDXV1TL9puq8dXpp0d91/Q03ym2496rf3DM8Ful50+eXjyuAk0YoSpK559dE6OOdZcv07bff6phjylXYuo0KW7fRX//6mJ56+mnV+3zB9bZv366i4uLgvxuuZJPl5ck8vPXxA4xpmsrLy7P8h2NN07R0Mu7UqZM+/vjjiMs+/PBDde3WzVJ9dpWVlamycmfKy123bt1eJ7CysrK9gkUojzt2J+35552nJ596UpL02eefq7KyUuXl5RHXrampUV1dnbp27Wqz5T+qqKjQRRddrNGnna7+AwbGPeZ21o+3rQGrV6/WpZdeFhwGObRvwxVagV/+8ZZv3769USCI54kF81W7u1bnnHOuuu+3vy666GJ98cUXweV2jkH4du7atUs+ny84Zy4eK5+bdLzP/H6/fnnRxbrkkos1dOjQRstSvb8TEa8N8Y5hwMv/+IfGjRtrq25/lO9aw+3Wyaf+VLP++KA+//JrTbnyav32lhuDy3826Xw9/dQT8pumPvvsU1VWVmr40ccElzeU/WN5bre74Q90mKZ27topn8+nLl27Rf3uDn994OEzTdX7TJncwDEphKIkRbokf8GCJ3TLLTdr+/ZtjR5t27bVSy+9FFyvVatWWr/+h70ulbe6PN2X5Ad6Weri9AB5vV5V7thheVju2GN/ovsfeCDispkzZ2nEiJMslWPXZ59/rpKSzikvt2PHjlq5cmWj51atWhUcdklEeXm5Kit36rPPP9eTTz6pCRPOjLpuTk5OsM5ELHv3Xf38ggt14YUXaNHfX9CKTyIH1kTXtyonJ0dPLFig/65cGXxs2bwp2EsQb3mrVq20YcMGy/X16tVLjzwyR6u/+Vr/WvKm/H6/Lr74kuByO8cgXH5+viTp66+/tvyaeNLxPrvzrobh5cDwW6hU7+9ExGtDvGMYcNedf7A9sduMMgoQ+nBJuvjSy7Vt69bgc0cddbR2Vlbq888+1TNPPaGx489s3EsvNS6nYQ6GTL9fLVu0kCR9/dWqqHV+serbKMv2nB+S2N8gFCXFpYZfWqFho66uTgsXLtSYMWP2CiITJ07QggVPBP89btxYzZhxW/DfXq9XCglZ8ZanOxRJUu8+h+oPv7tNv752mn597TTdetMNez1m3vk7PfzQH3X4sMMtlX3llVfq3/9+W5dednnwKqRvv/tOl1xyqT76+GNNndJwLxGPx6M6r7fRF+/Wrdv2Kq9169bBCayhV9sEfjH6/X69/fbbOuecc3XuOeempOxQP/vZ2br8iinBE9bKlSt1+RVTNHnSpLj7QlIweIZPoj73nHO0YMECLVy4UGeFTfoNlZubq/Lyct10080R51PE29bV36xWjx49gj0F8U7kdtePJNJ+nXDmmbr9jjuiTiaPt3zsmDG6/Y47gv/2xhn2Db3iq1evXrr44ou0cVPj+S5Wj0G4wDG5+ZZbVWvj7wfGkuz7LNz777+vBx98SI88Mifi8lTv73gifQ7itcHKMZSkM8+0Hmilhu/2unrfXt+b9826W5+u+EQ+X8Oy/678UldcepF+cuxxjb/rz/6Znn5ygV54fqHGjp/QuBzt/cNWe57zeHJ01NHH6I7bbtHu3bsjfnfn5+dH+U4nDqUCE62T4MnJld/nU2hn5cKFC9WvXz9169o1+KsgYNy4cbrrrru1aeMmtW9frJtuvFG/uuYa9e59iHqWlsrt8TR0pe55XbzlklRU3F5bt2y2/G9JMizelLFVYaFOHTlKI386WtKeXzeRVjR/vK+H1xv/BHDA/vvrjTde1913363jjz9BVVVVKigo0MiRp+r1114N/vI1DENTpk7RoMFDdMzRR+vLlV+qf//+crsbZ/npN/xaJ554olyGofnz5urYY4+VJF13/a/14YcfyufzqbS0VJddeql++ctfpKTsUL+ZPl2SdPoZY7Rt2zYVFxfrFxdeoCuvvDLuvpAaQssJJ56oXr0O0mmnnaaHH35IknTWWRM1dOhh6tuvn0pLS2OWMWfObJ1/3vnq26+/BvTvr3Xr1gWXxdvWE088Qfc/8ICOPfY4FbZurcJWrdSxY8eoddldP5JI+/W2236r22bM0GHDDlf74mLtrq3VoIEDg/sj3vKbbrpR11xzrfoc2lelpaXyeDx7Hc9Qw486Wvn5+epZWqp169apcmelbr3l5kbr2DkG4ebMma3f/va36tuvnwYPGqwNGzfqyScWqFOnTvFfHEGy77Nwl152uXz19TrppB97ZsuPKQ+GpFTv73gifQ7itcHKMZRke4K325BqvfWNfgjV1tbqiy/+T396+EHtrqmRy2WoS5cuOnHEybpi6rRG644dN0E/Ofpw9Tm0rw444MDgssAtXELXDYSawHP33f+w/vC7GRo2pL8GDhykTRs36tHH5qnjngsnDuzeWavX7H2fK08T+xuc2co1c+Y9ZqK/NPZltbVevfH6azr55FNkJPFF4JQF8+bqp6NGqU3bdk43Ja6qqipt3bpVXbt2tTyB2OqXYCJlZ9KIk0/R2WefZbk3oLa2VlVVVSoqKlLHTp21ccOPX57xtnXNmjUqLCxU27ZtLdVld/2myu4xQNP28XfVeumVf2v8yYeppH1h/BdEMfb0n2rcmRN11tnnpLB1sd30p1c1acyxGnxAy4zV2Zw8PncuPUXJCswpamqaUpsLCgqiXoqezWUna82aNVqxYoWef25h/JX3yMvLU15entasWaOWLRt/McbbVquTghNdvylK5BigeTBNf8I3v/z++7X67NMVenzekxm9UWvT+VbPXoSiJO2o3KY2baxd5pktfD6/4/cqQnyPz52r00aPthTaampqlJeXJ8MwVFVVpV9dc43GjhmTgVY2b3aOAZqXXVW75C9KrKfoyScW6JSRo9Qiv0CZusl0vbfO8tQIRJd94wVNhEumPG63qqurU3LfoEw+Nm5crzat22TlcFGqWP2bbdnK7/dr3rz5mjhxgqX1Kyoq1OughsuWD+59iIqL2+umm25McyubN7vHAM2D25AKWrXU1u27JNNv++H31evZp57QGWPGJfT6RB+frvpOXdoXKMdo/n9CKJ3oKUqQ2+NWz1499e477+rww49Qhw4do84t8vl8lu/1E8rv90e8msjK63wRX+eSt65W7y9/V3379ldObo7tspuKdeuy6w/w2hW4E7JVJ598sr7+KrFL8hGZ3WOA5qE4360jBpTp+dfelyGX+vbsLk9e5FNlze5a1fkahxC/36/nF7+m/Px87dgV+W9WVlXVyO4MBp/fr927I9wexWWosqpGr3/wjcaeNExF+c33x24mEIoS5HZ71L1bd/n9fq34+CPtqKzca+zYcLnkzonfY2FIys0JuZ17lC5Ql8tQbpS744bLycuRSxHKcbnUr/8AdezUSS1a5FsqCwD2FZ3b5anS20ZjRwzTv9/7QouXf7fXn9UwXKYMV/xU4zZcCqzmcrmUkxv5+9vjMi1NCMrJdQWv9P2RqfwWLTX2pGFqU5ivbu3zxeyixBGKkpCTl6cePXqopKSLfL76JjF52TAM5eTmEIgAIAK3IfUuaaH1LQ0VHDdE3vrE5um4XIr0szQt3C6/ivINdS1uIQJRcghFSTLcHhW0auV0MwAAKVTSNlclbZv23ETYx+AjAACACEUAAACSCEUAAACSCEUAAACSCEUAAACS9lx99vjcuU63AwAAwFH/D2akvvjz8auXAAAAAElFTkSuQmCC=="/>
<small>Fig 2. SyncSink user interface.</small></div>

To use the application start it with @panako syncsink@. Subsequently add various audio or video files using drag and drop. If the same audio is found in the various media files a timebox plot appears, as in the screenshot below. To add corresponding data-files click one of the boxes on the timeline and choose a data file that is synchronized with the audio. The datafile should be a CSV-file. The separator should be ',' and the first column should contain a timestamp in fractional seconds. After pressing @Sync@ a new CSV-file is created with the first column containing correctly shifted time stamps. If this is done for multiple files, a synchronized sensor-stream is created. Also, "ffmpeg":https://www.ffmpeg.org/ commands to syncronize the media files themselves are printed to the command line.

It is also possible to start the application with media streams immediately pressent. The first file is considered to be the reference stream. 

bc. panako syncsink reference.avi first.mkv second.mp3 third.wav






h3(#compare). Compare the structure of media files - **@panako compare@**

This operation extracts fingerprints from a reference media file and searches for the fingerprints in another media file. The aim is to identify the parts of audio that are present in both input files. If only one audio file is given, a self similarity matrix is constructed. Using the matrix it becomes clear when the exact same audio is repeated within the same song. It can be used to automatically detect where cuts have been made in a long original album edit to end up with a shorter radio edit of the same song. Another use case is musical structure analysis, this works especially well in electronic music. To call the application:

bc. panako compare audio.wav > self_similarity.csv
bc. panako compare original_edit.wav radio_edit.wav > cuts_where.csv

The output is a CSV file with millisecond values. When only one file is given, the diagonal is detected in a self similarity matrix and the output could look like below, if there is a repetiion of the audio between 3s-3.5s at 90-90.5s. The data is easy to visualize in a spreadsheet application.

bc. 10,10
15,15
20,20
...
3000,3000,90000
3010,3010,90010
3500,3500,90500
...
4000,4000
4010,4010
...


h2(#read). Further Reading

Some relevant reading material about acoustic fingerprinting. 

* Cano, Pedro and Batlle, Eloi and Kalker, Ton and Haitsma, Jaap __A Review of Audio Fingerprinting__ (2005)
* Arzt, Andreas and Bock, Sebastian and Widmer, Gerhard __Fast Identification of Piece and Score Position via Symbolic Fingerprinting__ (2012)
* Fenet, Sebastien and Richard, Gael and Grenier, Yves __A Scalable Audio Fingerprint Method with Robustness to Pitch-Shifting__ (2011)
* Wang, Avery L. __An Industrial-Strength Audio Search Algorithm__ (2003)
* Ellis, Dan and Whitman, Brian and Porter, Alastair __Echoprint - An Open Music Identification Service__ (2011)
* Joren Six and Olmo Cornelis __A Robust Audio Fingerprinter Based on Pitch Class Histograms - Applications for Ethnic Music Archives__ (2012)
* Reinhard Sonnleitner and Gerhard Widmer __Quad-based Audio Fingerprinting Robust To Time And Frequency Scaling__ (2014)

h2(#credits). Credits

The Panako software was developed at "IPEM, Ghent University":http://www.ipem.ugent.be/ by Joren Six.

Some parts of Panako were inspired by the "Robust Landmark-Based Audio Fingerprinting Matlab implementation by Dan Ellis":http://www.ee.columbia.edu/~dpwe/resources/matlab/fingerprint/.

If you use Panako for research purposes, please cite the following work:

bc. @inproceedings{six2014panako,
  author      = {Joren Six and Marc Leman},
  title       = {{Panako - A Scalable Acoustic Fingerprinting System Handling Time-Scale and Pitch Modification}},
  booktitle   = {{Proceedings of the 15th ISMIR Conference (ISMIR 2014)}}, 
  year        =  2014
}


h2(#ismir). Reproduce the ISMIR Paper Results

The directory @doc/Reproducibility@ contains scripts to reproduce the result found in the 
"Panako ISMIR 2014 paper":http://www.terasoft.com.tw/conf/ismir2014/proceedings/T048_122_Paper.pdf. The scripts follow this procedure:

1) The Jamendo dataset is downloaded.
2) The fingerprints are extracted and stored for each file in the data set.o download an openly available dataset
3) Query files are created from the Jamendo data set.
4) Panako is queried for each query file, results are logged
5) Results are parsed.


h3. Requirements


To run the scripts, a UNIX like system with following utilities is required:

* wget: an utility to download files
* "SoX":http://sox.sourceforge.net/, inlcuding support for MP3 and GSM encoding.
* bash: the bash shell
* "Ruby":https://www.ruby-lang.org/en/: The ruby programming language runtime environment.
* Unzip: to unzip the metadata file.

Also the panako software is needed. Please see above to install the Panako.
The configuration used during the test is also included in the @doc/Reproducibility@ directory.

If all requirements are met, running the test is done using @bash run_experiment.bash@


 